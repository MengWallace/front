/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&$("html").addClass("ismobile");var App=function(){function e(){function e(e,t,a){$(e).mCustomScrollbar({theme:t,scrollInertia:100,axis:"yx",mouseWheel:{enable:!0,axis:a,preventDefault:!0}})}if($("html").hasClass("ismobile")||$(".c-overflow")[0]&&e(".c-overflow","minimal-dark","y"),$(".fg-line")[0]&&($("body").on("focus",".fg-line .form-control",function(){$(this).closest(".fg-line").addClass("fg-toggled")}),$("body").on("blur",".form-control",function(){var e=$(this).closest(".form-group, .input-group"),t=e.find(".form-control").val();e.hasClass("fg-float")?0==t.length&&$(this).closest(".fg-line").removeClass("fg-toggled"):$(this).closest(".fg-line").removeClass("fg-toggled")})),$(".fg-float")[0]&&$(".fg-float .form-control").each(function(){var e=$(this).val();0==!e.length&&$(this).closest(".fg-line").addClass("fg-toggled")}),$("[data-hide]").on("click",function(){$(this).closest("."+$(this).attr("data-hide")).addClass("hide")}),jQuery.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},$("body").on("focus",".hs-input",function(){$(".h-search").addClass("focused")}),$("body").click(function(e){$(e.target).hasClass("hs-input")||($(".hs-input").val(""),$(".h-search").removeClass("focused"))}),$("body").on("click",".hc-trigger",function(){$(this).parent().toggleClass("toggled")}),$("body").on("click",".hc-item",function(){var e=$(this).data("ma-header-value");$(".hc-item").removeClass("selected"),$(this).addClass("selected"),$("body").attr("data-ma-header",e)}),$('[data-action="fullscreen"]')[0]){var t=$("[data-action='fullscreen']");t.on("click",function(e){function a(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}e.preventDefault(),a(document.documentElement),t.closest(".dropdown").removeClass("open")})}}function t(e,t){$.notify({message:e},{type:t,allow_dismiss:!1,label:"Cancel",className:"btn-xs btn-inverse",delay:800,animate:{enter:"animated fadeInRight",exit:"animated fadeOutRight"},offset:{x:30,y:30}})}function a(){$("form .cancel").on("click",function(e){$(e.target).closest("form").trigger("reset")})}function n(){$('[data-toggle="tooltip"]')[0]&&$('[data-toggle="tooltip"]').tooltip()}function o(){$('[data-toggle="popover"]')[0]&&$('[data-toggle="popover"]').popover()}function i(){$("body").on("click","[data-ma-action]",function(e){e.preventDefault();var t=$(this).data("ma-action"),a=$(this);switch(t){case"sidebar-open":var n=$(this).data("ma-target");if("main-menu"==n){if($("body").width()>=1024){var o=$("#main").hasClass("open");o?$("#main").removeClass("open"):$("#main").addClass("open");break}$("#s-main-menu").addClass("toggled")}a.addClass("toggled"),$("#main").append('<div data-ma-action="sidebar-close" class="sidebar-backdrop animated fadeIn" />'),"user-alerts"==n&&$("#s-user-alerts").addClass("toggled"),$("body").addClass("o-hidden");break;case"sidebar-close":$('[data-ma-action="sidebar-open"]').removeClass("toggled"),$("#main").removeClass("toggled"),$(".sidebar").removeClass("toggled"),$(".sidebar-backdrop").remove(),$("body").removeClass("o-hidden");break;case"search-clear":$(".h-search").removeClass("toggled"),$(".hs-input").val(""),$(".h-search").removeClass("focused");break;case"search-open":$(".h-search").addClass("toggled"),$(".hs-input").focus();break;case"submenu-toggle":a.next().slideToggle(200),a.parent().toggleClass("toggled");break;case"message-toggle":$(".ms-menu").toggleClass("toggled"),a.toggleClass("toggled");break;case"ah-search-open":s=$(this).closest(".action-header").find(".ah-search"),s.fadeIn(300),s.find(".ahs-input").focus();break;case"ah-search-close":s.fadeOut(300),setTimeout(function(){s.find(".ahs-input").val("")},350);break;case"clear-notification":console.log("start clear-notification");var i=a.parent().closest(".tab-pane"),s=i.find(".list-group"),l=s.find(".list-group-item"),c=l.size();a.parent().fadeOut(),s.find(".list-group").prepend('<i class="grid-loading hide-it"></i>'),s.find(".grid-loading").fadeIn(1500);var r=0;l.each(function(){var e=$(this);setTimeout(function(){e.addClass("animated fadeOutRightBig").delay(1e3).queue(function(){e.remove()})},r+=150)}),setTimeout(function(){i.addClass("empty")},150*c+200)}})}function s(){e(),a(),i()}return{init:s,notify:t,toggleTooltip:n,togglePopover:o}}();$(document).ready(function(){App.init()});var AppDocs=function(){function e(e){var t=document.querySelector(e),a='<ul><li><a href="#content">目录</a>',n=2,o=[].slice.call(t.querySelectorAll("h2, h3"));return o.length<2?"":(o.forEach(function(e,t){var o=parseInt(e.nodeName.substring(1)),i='<li><a href="#'+e.id+'">'+e.innerText+"</a>";o>n?i="<ul>"+i:o<n&&(i="</li></ul></li>"+i),a+=i,n=o}),appendEnd="</li></ul>",n>2&&(appendEnd="</li></ul></li></ul>"),a+=appendEnd,'<nav class="doc_nav">'+a+"</nav>")}function t(){if($(".doc_body")[0]){var t=e(".doc_body");if($(".doc_nav_container").html(t),""==t)return;$(".doc_nav  a").on("click",function(){$(".doc_nav a.active").removeClass("active"),"#content"!=$(this).attr("href")&&$(this).addClass("active")}),$(window).scroll(function(){var e=$(window).scrollTop();e>=0&&$(".doc_body h2,.doc_body h3").each(function(t){if($(this).position().top<=e-60){var a=$(this).attr("id");void 0!=a&&($(".doc_nav a.active").removeClass("active"),$('.doc_nav a[href="#'+$(this).attr("id")+'"]').addClass("active"))}})}).scroll(),$(window).scroll(function(){if(!($(document).width()<1024)){var e=$(this).scrollTop(),t=$(".doc_body").height(),a=$(".doc_nav").height(),n=t-a,o=e<115?160-e:n>e?85:n-e;$(".doc_nav").css("top",o)}})}}function a(e){for(var a=0;a<c.cahcedDocs.length;a++)if(c.cahcedDocs[a].location==e)return $(".doc_body").html(c.cahcedDocs[a].html),t(),void l($(".doc_body"));$.ajax({type:"GET",url:"apis/docs/"+e+".html",dataType:"html",success:function(a){$(".doc_body").html(a),c.cahcedDocs.push({location:e,html:a}),t(),l($(".doc_body"))}})}function n(e,t){return window.scrollTo(0,0),window.location.pathname.endsWith("/docs.html")?(e=e.toLowerCase(),1!=t&&window.history.pushState(e,"开发者中心文档",window.location.pathname+"#/pages/"+e),$(".main-menu li.active").removeClass("active"),$(".main-menu").find('a[href="'+e+'"]').parent("li").addClass("active"),a(e),void o(e)):void window.location.replace(window.location.pathname.replace(/\/[^\/\/]+$/,"")+"/docs.html#/pages/"+e)}function o(e){if(e=decodeURI(e),void 0==c.index)$.ajax({type:"GET",url:"apis/docs/_index.json",dataType:"json",headers:{Accept:"application/json"},success:function(t){c.index=t;for(var a=0;a<c.index.length;a++)c.index[a].location==e&&$(".c-header").find("h2").text(c.index[a].title)}});else for(var t=0;t<c.index.length;t++)c.index[t].location==e&&$(".c-header").find("h2").text(c.index[t].title)}function i(){$("#login").on("click",function(e){e.preventDefault(),window.location.href="/auth/login?redirect_uri="+encodeURI(window.location.href)}),$.ajax({type:"GET",cache:!1,url:"/auth/apis/preference/profile",dataType:"json",headers:{Accept:"application/json"},success:function(e){void 0==e.identification||""==e.identification?($("#real-name-verrified").removeClass("hide"),$("#main-card").addClass("hide")):($("#real-name-verrified").addClass("hide"),$("#main-card").removeClass("hide")),$("#login").addClass("hide"),$("header").find(".avatar").attr("style","background:"+d(e.name)),$("header").find(".avatar").text(e.name.charAt(0)),$(".hm-profile").removeClass("hide")}})}function s(){if(i(),window.location.pathname.endsWith("docs.html")){var e=r;void 0==window.location.hash||window.location.hash.indexOf("#/pages/")||(e=decodeURI(window.location.hash).substr(8,window.location.hash.length)),n(e),l()}}function l(e){void 0==e?$("[data-internalmd]").on("click",function(e){e.preventDefault(),n($(this).attr("href"))}):e.find("[data-internalmd]").on("click",function(e){e.preventDefault(),n($(this).attr("href"))})}var c={},r="oauth 2.0";c.cahcedDocs=[],$(window).on("popstate",function(e){if(null===e);else{var t=decodeURI(window.location.hash).substr(8,window.location.hash.length);n(t,!0)}});var d=function(e){for(var t=0,a=0;a<e.length;a++)t+=e.charCodeAt(a);const n=t%360;return"hsl("+n+",60%,75%)"};return{init:s,toggleInternalMd:l}}();jQuery(document).ready(function(){AppDocs.init()});var AppSearch=function(){"use strict";function e(e,i,d,h){if(!r){r=!0,a=document.getElementById(d),n=n=document.getElementById(h),o=n.innerHTML;var u=new XMLHttpRequest;u.open("GET",i,!0),u.setRequestHeader("Accept","application/json"),u.onreadystatechange=function(){4==u.readyState&&200==u.status&&(l=JSON.parse(u.responseText),c||t())},u.send();var f=new XMLHttpRequest;f.open("GET",e,!0),f.setRequestHeader("Accept","application/json"),f.onreadystatechange=function(){4==f.readyState&&200==f.status&&(s=JSON.parse(f.responseText),c||t())},f.send(),a.addEventListener("keyup",t)}}function t(){var e=a.value.trim().toLowerCase().split(/[\s\-]+/);if(0==s.length)return void(n.innerHTML="<ul>...</ul>");n.innerHTML="<ul></ul>";var t=0;c=!0;var r=n.firstElementChild;return a.value.trim().length<=0?(l.forEach(function(e){var t="<li data-internalmd href='"+e.location+"'><div>"+e.title+"</div><small>"+e.text+"...</small></li>";r.insertAdjacentHTML("beforeend",t)}),void AppDocs.toggleInternalMd($("#search-result"))):(i=!1,s.forEach(function(a){if("readme"!=a.location){var n=!0,o=a.title.trim().toLowerCase(),s=a.text.trim().replace(/<[^>]+>/g,"").toLowerCase(),l=a.location,c=-1,d=-1,h=-1;if(""!=o&&""!=s&&e.forEach(function(e,t){c=o.indexOf(e),d=s.indexOf(e),c<0&&d<0?n=!1:(d<0&&(d=0),0==t&&(h=d))}),n){if(t>10)return;t++;var u="<li data-internalmd href='"+l+"'><div>"+a.title+"</div>",f=a.text.trim().replace(/<[^>]+>/g,"");if(h>=0){var p=h-6,m=70;p<0&&(p=0),m>f.length-p&&(m=f.length-p);var g=f.substr(p,m);e.forEach(function(e){var t=new RegExp(e,"gi");g=g.replace(t,"<em>"+e+"</em>")}),u+="<small>"+g+"...</small></li>"}i=!0,r.insertAdjacentHTML("beforeend",u)}}}),AppDocs.toggleInternalMd($("#search-result")),void(i||(n.innerHTML=o)))}var a,n,o,i,s=[],l=[],c=!1,r=!1;return{init:e,search:t}}();document.getElementById("search").onfocus=function(){AppSearch.init("apis/docs/_search_index.json","assets/json/search_default.json","search","search-result"),$("body").click(function(e){$(e.target).hasClass("hs-input")||AppSearch.search()})};